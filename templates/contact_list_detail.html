{% extends "base.html" %}

{% block title %}مخاطبین لیست: {{ list_name }} - پلتفرم واتساپ{% endblock %}

{% block content %}
<a href="{{ url_for('contact_lists_route') }}" class="back-link">&larr; بازگشت به لیست‌ها</a>
<h2>مخاطبین در لیست: {{ list_name }}</h2>
<a href="{{ url_for('new_contact_form_route', list_id=list_id) }}" class="create-button">افزودن مخاطب جدید به این لیست</a>

{% if contacts_in_list %}
<table>
    <thead>
        <tr>
            <th>نام مخاطب</th>
            <th>شناسه واتساپ (ID)</th>
            <th>فیلدهای سفارشی</th>
            <th>عملیات</th>
        </tr>
    </thead>
    <tbody>
        {% for contact in contacts_in_list %}
        <tr>
            <td>{{ contact.name }}</td>
            <td>{{ contact.whatsapp_id }}</td>
            <td>
                {% if contact.custom_fields %}
                    {% for key, value in contact.custom_fields.items() %}
                        <span><strong>{{ key }}:</strong> {{ value }}</span><br>
                    {% endfor %}
                {% else %}
                    -
                {% endif %}
            </td>
            <td class="actions">
                <a href="#">ویرایش</a> | 
                <a href="#">حذف از لیست</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>هیچ مخاطبی در این لیست وجود ندارد.</p>
{% endif %}
{% endblock %}
